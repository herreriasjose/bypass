const getimages=document.getElementById("getimages"),getCommand=document.getElementById("getcommand");function sendMessageToBackground(e,t=null){}function handleResponse(e){const t=document.getElementById("display"),n=`<ul>${e.map((e=>{let t=e.currentSrc.split("/");t=t[t.length-1];const n=e.height,a=e.with;return allImagesList.push(e.currentSrc),`<li><a href=${e.currentSrc} target="_blank">${t} (${n} x ${a})}</a></li>`})).join("")}</ul>`,a=document.createElement("span");a.innerHTML=n,t.appendChild(a);const s=document.createElement("button");s.classList.add("form-control"),s.classList.add("m-2"),s.innerText="All images",s.onclick=showAllImages,t.appendChild(s)}function sendMessageToContent(e,t=null){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{command:e},(function(e){null!=e&&handleResponse(e)}))}))}getCommand.addEventListener("change",(async(e,t)=>{switch(getCommand.value){case"getimages":return void sendMessageToContent("getimages");case"getscreenshot":return void alert("Not available yet");case"getnanoid":return void sendMessageToContent("getnanoid");default:return}})),document.addEventListener("click",(e=>{const t=e.target.closest("a[href]");t&&(e.preventDefault(),chrome.tabs.create({url:t.href,active:!1}))}));const allImagesList=[];function showAllImages(){if(confirm(`Are you sure you want to open ${allImagesList.length} new tabs?`))for(let e of allImagesList)chrome.tabs.create({url:e})}