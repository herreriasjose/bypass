const getCommand=document.getElementById("getcommand");function sendMessageToBackground(e,n=null){}function handleResponse(e){console.log(">>> response:",e);const n=e.command,t=e.data;if(null!=n)switch(n){case"getimages":return void displayImages(t);case"getnanoid":return void console.log(">>> nanoid:",t);default:return}}function sendMessageToContent(e,n=null){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{command:e,parameters:n},(function(e){null!=e&&handleResponse(e)}))}))}getCommand.addEventListener("change",(async(e,n)=>{switch(getCommand.value){case"getimages":return void sendMessageToContent("getimages");case"getscreenshot":return void alert("Not available yet");case"getnanoid":return void sendMessageToContent("getnanoid");default:return}})),document.addEventListener("click",(e=>{const n=e.target.closest("a[href]");n&&(e.preventDefault(),chrome.tabs.create({url:n.href,active:!1}))}));const allImagesList=[];function displayImages(e){const n=document.getElementById("display"),t=`<ul>${e.map((e=>{let n=e.currentSrc.split("/");n=n[n.length-1];const t=e.height,a=e.with;return allImagesList.push(e.currentSrc),`<li><a href=${e.currentSrc} target="_blank">${n} (${t} x ${a})}</a></li>`})).join("")}</ul>`,a=document.createElement("span");a.innerHTML=t,n.appendChild(a);const s=document.createElement("button");s.classList.add("form-control"),s.classList.add("m-2"),s.innerText="All images",s.onclick=showAllImages,n.appendChild(s)}function showAllImages(){if(confirm(`Are you sure you want to open ${allImagesList.length} new tabs?`))for(let e of allImagesList)chrome.tabs.create({url:e})}